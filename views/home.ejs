<!DOCTYPE html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Matcha</title>
    <link rel="stylesheet" href="../layout/index.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.8.0/css/bulma.min.css">
    <script defer="" src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>
<body style ="background: url(../images/bg.png)">
  
<div style="background: black;">
   <section class="section">
        <div class="container"style="background: black;" >
            <a href="/home">
                <h1 class="title" style="font-weight:200;color:white; text-align: center;">Matcha</h1>
                <p class="subtitle" style="color:#fff; text-align: center;margin-bottom: 2em;">Find love her!</p>
            </a>
        
       
    <a href="/sort"><button  class="button is-info" style="margin-bottom:2em; background-color:#828afc;color:#fff; margin-left:1.5em">Sort</button></a>
    <a href="/filteredSearch"><button  class="button is-info"  style="margin-bottom:2em;background-color:#828afc;color:#fff; margin-left:1.5em">Filtered Search</button></a>
    <a href="/chatList"><button  class="button is-info"style="margin-bottom:2em;background-color:#828afc;color:#fff; margin-left:1.5em">Chat List</button></a>
    <a href="/profile-page"><button class="button is-info" style="margin-bottom:2em;background-color:#828afc;color:#fff; margin-left:1.5em">Profile</button></a>
    <a href="/"><button class="button is-info"style="margin-left:9em;margin-bottom:2em;background-color:#828afc;color:#fff;margin-left:1.5em">Sign Out</button></a>

</div>
   </section>
   
    <hr style="color:#fff;">
 
    </div>

<div  class="wrapper" >
        
        <!--Don't display Blocked Users-->
      <% if(locationTest =='1'){%>
            <% for(users of user){%>
                <% var trueval = 0%>
                <% for(block of blocked){%>
                    <% if(block == users.username){%>
                        <% trueval = 1;%>
                        <% break}%>
                <% }%>
                <% if(trueval == '0'){%>
                   
                    <% if((users.city == userCity) && (users.postal == userPostal)){%>
                        <% if((ageBetween == '18-25') && (users.age >=18 && users.age <=25)){%>
                            <a style="margin-top:2em;padding-left: 10em; padding-right: 10em;" href="visitProfile?user=<%= users.username%>"><button style=" background-color: #60b9e2;color:#fff;font-weight: 700;" class="button2 form-control" ><%= users.username %></button></a>
                        <%}%>
                        <% if((ageBetween == '26-35') && (users.age >=26 && users.age <=35)){%>
                            <a style="margin-top:2em;padding-left: 10em; padding-right: 10em;" href="visitProfile?user=<%= users.username%>"><button style=" background-color: #60b9e2;color:#fff;font-weight: 700;" class="button2 form-control" ><%= users.username %></button></a>
                        <%}%>
                        <% if((ageBetween == '36-45') && (users.age >=36 && users.age <=45)){%>
                            <a style="margin-top:2em;padding-left: 10em; padding-right: 10em;" href="visitProfile?user=<%= users.username%>"><button style=" background-color: #60b9e2;color:#fff;font-weight: 700;" class="button2 form-control" ><%= users.username %></button></a>
                        <%}%>
                        <% if((ageBetween == '46-55') && (users.age >=46 && users.age <=55)){%>
                            <a style="margin-top:2em;padding-left: 10em; padding-right: 10em;" href="visitProfile?user=<%= users.username%>"><button style=" background-color: #60b9e2;color:#fff;font-weight: 700;" class="button2 form-control" ><%= users.username %></button></a>
                        <%}%>
                        <% if((ageBetween == '56-older') && (users.age >=56)){%>
                            <a style="margin-top:2em;padding-left: 10em; padding-right: 10em;" href="visitProfile?user=<%= users.username%>"><button style=" background-color: #60b9e2;color:#fff;font-weight: 700;" class="button2 form-control" ><%= users.username %></button></a>
                        <%}%>
                    <%}%>
                   
                <%}%>
        <%}%>
        <% for(users of user){%>
            <% var trueval = 0%>
            <% for(block of blocked){%>
                <% if(block == users.username){%>
                    <% trueval = 1;%>
                    <% break}%>
            <% }%>
            <% if(trueval == '0'){%>
                <% if((users.city != userCity) && (users.postal != userPostal)){%>
                    <% if((ageBetween == '18-25') && (users.age >=18 && users.age <=25)){%>
                        <a style="margin-top:2em;padding-left: 10em; padding-right: 10em;" href="visitProfile?user=<%= users.username%>"><button style=" background-color: #60b9e2;color:#fff;font-weight: 700;" class="button2 form-control" ><%= users.username %></button></a>
                    <%}%>
                    <% if((ageBetween == '26-35') && (users.age >=26 && users.age <=35)){%>
                        <a style="margin-top:2em;padding-left: 10em; padding-right: 10em;" href="visitProfile?user=<%= users.username%>"><button style=" background-color: #60b9e2;color:#fff;font-weight: 700;" class="button2 form-control" ><%= users.username %></button></a>
                    <%}%>
                    <% if((ageBetween == '36-45') && (users.age >=36 && users.age <=45)){%>
                        <a style="margin-top:2em;padding-left: 10em; padding-right: 10em;" href="visitProfile?user=<%= users.username%>"><button style=" background-color: #60b9e2;color:#fff;font-weight: 700;" class="button2 form-control" ><%= users.username %></button></a>
                    <%}%>
                    <% if((ageBetween == '46-55') && (users.age >=46 && users.age <=55)){%>
                        <a style="margin-top:2em;padding-left: 10em; padding-right: 10em;" href="visitProfile?user=<%= users.username%>"><button style=" background-color: #60b9e2;color:#fff;font-weight: 700;" class="button2 form-control" ><%= users.username %></button></a>
                    <%}%>
                    <% if((ageBetween == '56-older') && (users.age >=56)){%>
                        <a style="margin-top:2em;padding-left: 10em; padding-right: 10em;" href="visitProfile?user=<%= users.username%>"><button style=" background-color: #60b9e2;color:#fff;font-weight: 700;" class="button2 form-control" ><%= users.username %></button></a>
                    <%}%>
                <%}%>
                <%}%>
                <%}%>
    <% }%>

        <% if(locationTest == '0'){%>
        <h1 style="color:#fff"> Same Geographical area</h1>
        <hr>
        <% for(users of user){%>
            <% var trueval = 0%>
            <% for(block of blocked){%>
                <% if(block == users.username){%>
                    <% trueval = 1;%>
                    <% break}%>
            <% }%>
            <% if(trueval == 0){%>
               
                <% if((users.city == userCity) && (users.postal == userPostal)){%>
                    <% if((ageBetween == '18-25') && (users.age >=18 && users.age <=25)){%>
                        <a style="margin-top:2em;padding-left: 10em; padding-right: 10em;" href="visitProfile?user=<%= users.username%>"><button style=" background-color: #60b9e2;color:#fff;font-weight: 700;" class="button2 form-control" ><%= users.username %></button></a>
                    <%}%>
                    <% if((ageBetween == '26-35') && (users.age >=26 && users.age <=35)){%>
                        <a style="margin-top:2em;padding-left: 10em; padding-right: 10em;" href="visitProfile?user=<%= users.username%>"><button style=" background-color: #60b9e2;color:#fff;font-weight: 700;" class="button2 form-control" ><%= users.username %></button></a>
                    <%}%>
                    <% if((ageBetween == '36-45') && (users.age >=36 && users.age <=45)){%>
                        <a style="margin-top:2em;padding-left: 10em; padding-right: 10em;" href="visitProfile?user=<%= users.username%>"><button style=" background-color: #60b9e2;color:#fff;font-weight: 700;" class="button2 form-control" ><%= users.username %></button></a>
                    <%}%>
                    <% if((ageBetween == '46-55') && (users.age >=46 && users.age <=55)){%>
                        <a style="margin-top:2em;padding-left: 10em; padding-right: 10em;" href="visitProfile?user=<%= users.username%>"><button style=" background-color: #60b9e2;color:#fff;font-weight: 700;" class="button2 form-control" ><%= users.username %></button></a>
                    <%}%>
                    <% if((ageBetween == '56-older') && (users.age >=56)){%>
                        <a style="margin-top:2em;padding-left: 10em; padding-right: 10em;" href="visitProfile?user=<%= users.username%>"><button style=" background-color: #60b9e2;color:#fff;font-weight: 700;" class="button2 form-control" ><%= users.username %></button></a>
                    <%}%>
                <%}%>
            <%}%>
        <%}%>
        <br><br><br><br>
        <h1 style="color:#fff"> Not same Geographical area</h1>
<hr>
        <% for(users of user){%>
            <% var trueval = 0%>
            <% for(block of blocked){%>
                <% if(block == users.username){%>
                    <% trueval = 1;%>
                    <% break}%>
            <% }%>
            <% if(trueval == 0){%>
                <% if((users.city != userCity) && (users.postal != userPostal)){%>

                    <% if((ageBetween == '18-25') && (users.age >=18 && users.age <=25)){%>
                        <a style="margin-top:2em;padding-left: 10em; padding-right: 10em;" href="visitProfile?user=<%= users.username%>"><button style=" background-color: #60b9e2;color:#fff;font-weight: 700;" class="button2 form-control" ><%= users.username %></button></a>
                    <%}%>
                    <% if((ageBetween == '26-35') && (users.age >=26 && users.age <=35)){%>
                        <a style="margin-top:2em;padding-left: 10em; padding-right: 10em;" href="visitProfile?user=<%= users.username%>"><button style=" background-color: #60b9e2;color:#fff;font-weight: 700;" class="button2 form-control" ><%= users.username %></button></a>
                    <%}%>
                    <% if((ageBetween == '36-45') && (users.age >=36 && users.age <=45)){%>
                        <a style="margin-top:2em;padding-left: 10em; padding-right: 10em;" href="visitProfile?user=<%= users.username%>"><button style=" background-color: #60b9e2;color:#fff;font-weight: 700;" class="button2 form-control" ><%= users.username %></button></a>
                    <%}%>
                    <% if((ageBetween == '46-55') && (users.age >=46 && users.age <=55)){%>
                        <a style="margin-top:2em;padding-left: 10em; padding-right: 10em;" href="visitProfile?user=<%= users.username%>"><button style=" background-color: #60b9e2;color:#fff;font-weight: 700;" class="button2 form-control" ><%= users.username %></button></a>
                    <%}%>
                    <% if((ageBetween == '56-older') && (users.age >=56)){%>
                        <a style="margin-top:2em;padding-left: 10em; padding-right: 10em;" href="visitProfile?user=<%= users.username%>"><button style=" background-color: #60b9e2;color:#fff;font-weight: 700;" class="button2 form-control" ><%= users.username %></button></a>
                    <%}%>
                <%}%>
            <%}%>
        <%}%>
    <%}%>
    </div>
  <footer class="footer" style="background: url(../images/menu.png);">
    <div class="content has-text-centered">
        <p style="color:white;"><strong style="color:white;">Matcha</strong> by J.T.A.B <a href="https://github.com/BrandonSwanepoel/Matcha"></a></p>
    </div>
</footer>
</body>
